"use strict";(self["webpackChunksortinghat_ui"]=self["webpackChunksortinghat_ui"]||[]).push([[274],{8274:(t,e,r)=>{r.r(e),r.d(e,{default:()=>K});var s=function(){var t=this,e=t._self._c;return e("tasks-table",{attrs:{"fetch-backends":t.fetchBackends,"fetch-tasks":t.fetchTasks,"create-task":t.createTask,"delete-task":t.deleteTask,"edit-task":t.editTask}})},n=[],i=r(1907),a=r(5617),o=r(5246),l=r(680),c=r(457),u=r(5129),d=r(2327),p=r(5830),h=r(4284),m=r(2269),f=r(5265),v=r(7768),k=r(604),Z=(r(8309),function(){var t=this,e=t._self._c;return e("section",{staticClass:"section"},[e("header",{staticClass:"header"},[e("h1",{staticClass:"title"},[t._v("Synchronization")]),e(f.Z,{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(r){var s=r.on;return[e(u.Z,t._g({attrs:{color:"primary",depressed:"",small:""}},s),[t._v(" Select source "),e(d.Z,{attrs:{color:"white",small:"",right:""}},[t._v("mdi-chevron-down")])],1)]}}])},[t.importers?e(p.Z,{attrs:{dense:""}},t._l(t.importers,(function(r,s){return e(h.Z,{key:s,on:{click:function(e){return t.openModal(r)}}},[e(m.V9,[t._v(" "+t._s(r.name)+" ")])],1)})),1):t._e()],1)],1),t.error?e(c.Z,{attrs:{text:"",type:"error"}},[t._v(" "+t._s(t.error)+" ")]):t._e(),t.isLoading?e(v.Z,{attrs:{indeterminate:"",color:"primary"}}):e(k.Z,{scopedSlots:t._u([{key:"default",fn:function(){return[0===t.tasks.length?e("div",{staticClass:"ma-8"},[e("h3",{staticClass:"text-subtitle-2"},[t._v("No connected sources")]),e("p",{staticClass:"text-body-2"},[t._v(" You can sync identities data from different data sources automatically and periodically. ")])]):t._e(),e("tbody",t._l(t.tasks,(function(r){return e("tr",{key:r.id},[e("td",{staticClass:"pr-6 py-4 pl-8"},[e("p",{staticClass:"subheader mb-0"},[t._v(" "+t._s(r.args.backend_name)+" ")]),r.lastExecution?e("p",{staticClass:"v-list-item__subtitle text--secondary mb-0"},[e(d.Z,{staticClass:"mb-1 mr-1",attrs:{color:r.failed?"failed":"finished","aria-label":r.failed?"failed":"finished","aria-hidden":"false",small:""}},[t._v(" "+t._s(r.failed?"mdi-alert":"mdi-check")+" ")]),t._v(" Last sync "+t._s(t.formatDate(r.lastExecution))+" ")],1):t._e()]),e("td",{staticClass:"text-right pr-8"},[e(u.Z,{staticClass:"mr-2",attrs:{color:"primary",text:"",small:"",outlined:""},on:{click:function(e){return t.openModal(r.args.backend_name,r)}}},[e(d.Z,{attrs:{small:""}},[t._v("mdi-pencil")]),e("span",{staticClass:"d-sr-only"},[t._v("Edit task")])],1),e(u.Z,{attrs:{color:"primary",text:"",small:"",outlined:""},on:{click:function(e){return t.deleteItem(r.id)}}},[e(d.Z,{attrs:{small:""}},[t._v("mdi-delete")]),e("span",{staticClass:"d-sr-only"},[t._v("Delete task")])],1)],1)])})),0)]},proxy:!0}])}),t.modal.isOpen?e("importer-modal",{attrs:{"is-open":t.modal.isOpen,"create-task":t.createTask,"edit-task":t.editTask,task:t.modal.task,importer:t.modal.importer},on:{"update:open":function(e){t.modal.isOpen=e},"update:tasks":function(e){return t.getTasks()}}}):t._e()],1)}),g=[],b=(r(3710),r(9826),r(1539),r(3385)),_=r(5223),y=r(4437),x=r(8560),C=r(1300),w=r(8651),$=r(5294),S=r(5234),T=r(3606),I=function(){var t=this,e=t._self._c;return e(x.Z,{attrs:{"max-width":"450"},on:{"click:outside":function(e){return t.$emit("update:open")}},model:{value:t.isOpen,callback:function(e){t.isOpen=e},expression:"isOpen"}},[e(b.Z,{staticClass:"section"},[e(_.EB,{staticClass:"header title"},[t._v(" Import identities from "+t._s(t.importer.name)+" ")]),e(_.ZB,{staticClass:"mt-3"},[e("h3",{staticClass:"subheader mb-2"},[t._v("Settings")]),t._l(t.form.fields,(function(r,s){return e($.Z,{key:s,staticClass:"pa-3"},[e(T.Z,{attrs:{label:s,dense:"","hide-details":"",outlined:""},model:{value:t.form.fields[s],callback:function(e){t.$set(t.form.fields,s,e)},expression:"form.fields[field]"}})],1)})),e($.Z,[e(y.Z,{attrs:{cols:"6"}},[e(w.Z,{staticClass:"mt-0",attrs:{dense:""},scopedSlots:t._u([{key:"label",fn:function(){return[e("h3",{staticClass:"subheader"},[t._v("Run script")])]},proxy:!0}]),model:{value:t.form.interval,callback:function(e){t.$set(t.form,"interval",e)},expression:"form.interval"}},[e(C.Z,{attrs:{value:0,label:"Once"}}),e(C.Z,{attrs:{value:10080,label:"Every week"}}),e(C.Z,{attrs:{value:43800,label:"Every month"}}),e(C.Z,{attrs:{value:"custom",label:"Custom"}})],1),e(T.Z,{staticClass:"ml-8",attrs:{label:"Every",type:"number",suffix:"minutes",dense:"","hide-details":"",outlined:""},model:{value:t.form.customInterval,callback:function(e){t.$set(t.form,"customInterval",e)},expression:"form.customInterval"}})],1)],1),t.error?e(c.Z,{staticClass:"ma-5",attrs:{text:"",type:"error"}},[t._v(" "+t._s(t.error)+" ")]):t._e()],2),e(_.h7,[e(S.Z),e(u.Z,{attrs:{color:"primary",text:""},on:{click:t.onClose}},[t._v(" Cancel ")]),e(u.Z,{attrs:{color:"primary",disabled:!t.form.fields.url,depressed:""},on:{click:t.onSave}},[t._v(" Save ")])],1)],1)],1)},B=[],E=r(4503),O=r(6080);r(8862),r(5827);const D={name:"ImporterModal",props:{importer:{type:Object,required:!0},task:{type:Object,required:!0},createTask:{type:Function,required:!0},editTask:{type:Function,required:!0},isOpen:{type:Boolean,default:!1}},data:function(){return{form:{fields:{},interval:this.task.interval||0,customInterval:""},error:null}},methods:{onSave:function(){this.task.id?this.updateTask():this.addTask()},onClose:function(){this.$emit("update:open",!1)},addTask:function(){var t=this;return(0,a.Z)((0,i.Z)().mark((function e(){var r,s,n;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,r="custom"===t.form.interval?t.form.customInterval:t.form.interval,s=JSON.stringify((0,O.Z)({backend_name:t.importer.name},t.form.fields)),e.next=5,t.createTask("import_identities",r,s);case 5:n=e.sent,n&&!n.errors&&(t.$emit("update:open",!1),t.$emit("update:tasks")),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),t.error=t.$getErrorMessage(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()},updateTask:function(){var t=this;return(0,a.Z)((0,i.Z)().mark((function e(){var r,s,n,a;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,r="custom"===t.form.interval?t.form.customInterval:t.form.interval,s=JSON.stringify((0,O.Z)({backend_name:t.importer.name},t.form.fields)),n={interval:r,params:s},e.next=6,t.editTask(t.task.id,n);case 6:a=e.sent,a&&!a.errors&&(t.$emit("update:open",!1),t.$emit("update:tasks")),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),t.error=t.$getErrorMessage(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()},buildForm:function(){var t=this,e=[0,10080,43800],r=this.task.args||{},s=this.importer.args.reduce((function(t,e){return(0,O.Z)((0,O.Z)({},t),{},(0,E.Z)({},e,r[e]))}),{});this.form.fields=s,this.task.interval&&!e.find((function(e){return e===t.task.interval}))&&(this.form.customInterval=this.task.interval,this.form.interval="custom")}},mounted:function(){this.buildForm()}},L=D;var F=r(1001),G=(0,F.Z)(L,I,B,!1,null,null,null);const q=G.exports,M={name:"TasksTable",components:{ImporterModal:q},props:{fetchBackends:{type:Function,required:!0},fetchTasks:{type:Function,required:!0},createTask:{type:Function,required:!0},deleteTask:{type:Function,required:!0},editTask:{type:Function,required:!0}},data:function(){return{importers:[],tasks:[],error:null,isLoading:!1,modal:{isOpen:!1,task:{},importer:{}}}},methods:{formatDate:function(t){return t?new Date(t).toLocaleString():"-"},openModal:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"string"===typeof t&&(t=this.importers.find((function(e){return e.name===t}))),Object.assign(this.modal,{isOpen:!0,importer:t,task:e})},getBackends:function(){var t=this;return(0,a.Z)((0,i.Z)().mark((function e(){var r;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.fetchBackends();case 3:r=e.sent,t.importers=r.data.identitiesImportersTypes,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),t.error=t.$getErrorMessage(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},getTasks:function(){var t=this;return(0,a.Z)((0,i.Z)().mark((function e(){var r;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.isLoading=!0,e.next=4,t.fetchTasks();case 4:r=e.sent,t.tasks=r.data.scheduledTasks.entities,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),t.error=t.$getErrorMessage(e.t0);case 11:return e.prev=11,t.isLoading=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})))()},deleteItem:function(t){var e=this;return(0,a.Z)((0,i.Z)().mark((function r(){var s;return(0,i.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e.deleteTask(t);case 3:s=r.sent,s.data.deleteScheduledTask&&e.getTasks(),r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](0),e.error=e.$getErrorMessage(r.t0);case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))()}},mounted:function(){var t=this;return(0,a.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getTasks(),e.next=3,t.getBackends();case 3:case"end":return e.stop()}}),e)})))()}},A=M;var R=(0,F.Z)(A,Z,g,!1,null,"0a1deaa8",null);const N=R.exports,j={name:"SettingsSync",components:{TasksTable:N},methods:{fetchBackends:function(){var t=this;return(0,a.Z)((0,i.Z)().mark((function e(){var r;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,o.S9)(t.$apollo);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))()},fetchTasks:function(){var t=this;return(0,a.Z)((0,i.Z)().mark((function e(){var r;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,o.qw)(t.$apollo);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))()},createTask:function(t,e,r){var s=this;return(0,a.Z)((0,i.Z)().mark((function n(){var a;return(0,i.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,(0,l.nf)(s.$apollo,t,e,r);case 2:return a=n.sent,n.abrupt("return",a);case 4:case"end":return n.stop()}}),n)})))()},deleteTask:function(t){var e=this;return(0,a.Z)((0,i.Z)().mark((function r(){var s;return(0,i.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,(0,l.BD)(e.$apollo,t);case 2:return s=r.sent,r.abrupt("return",s);case 4:case"end":return r.stop()}}),r)})))()},editTask:function(t,e){var r=this;return(0,a.Z)((0,i.Z)().mark((function s(){var n;return(0,i.Z)().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,(0,l.U_)(r.$apollo,t,e);case 2:return n=s.sent,s.abrupt("return",n);case 4:case"end":return s.stop()}}),s)})))()}}},z=j;var J=(0,F.Z)(z,s,n,!1,null,null,null);const K=J.exports},457:(t,e,r)=>{r.d(e,{Z:()=>m});var s=r(6080),n=r(4503),i=(r(6699),r(2925)),a=r(1903),o=r(1012),l=r(6470),c=r(3276),u=r(144);const d=u.ZP.extend({name:"transitionable",props:{mode:String,origin:String,transition:String}});var p=r(4987),h=r(6596);const m=(0,p.Z)(i.Z,l.Z,d).extend({name:"v-alert",props:{border:{type:String,validator:function(t){return["top","right","bottom","left"].includes(t)}},closeLabel:{type:String,default:"$vuetify.close"},coloredBorder:Boolean,dense:Boolean,dismissible:Boolean,closeIcon:{type:String,default:"$cancel"},icon:{default:"",type:[Boolean,String],validator:function(t){return"string"===typeof t||!1===t}},outlined:Boolean,prominent:Boolean,text:Boolean,type:{type:String,validator:function(t){return["info","error","success","warning"].includes(t)}},value:{type:Boolean,default:!0}},computed:{__cachedBorder:function(){if(!this.border)return null;var t={staticClass:"v-alert__border",class:(0,n.Z)({},"v-alert__border--".concat(this.border),!0)};return this.coloredBorder&&(t=this.setBackgroundColor(this.computedColor,t),t["class"]["v-alert__border--has-color"]=!0),this.$createElement("div",t)},__cachedDismissible:function(){var t=this;if(!this.dismissible)return null;var e=this.iconColor;return this.$createElement(a.Z,{staticClass:"v-alert__dismissible",props:{color:e,icon:!0,small:!0},attrs:{"aria-label":this.$vuetify.lang.t(this.closeLabel)},on:{click:function(){return t.isActive=!1}}},[this.$createElement(o.Z,{props:{color:e}},this.closeIcon)])},__cachedIcon:function(){return this.computedIcon?this.$createElement(o.Z,{staticClass:"v-alert__icon",props:{color:this.iconColor}},this.computedIcon):null},classes:function(){var t=(0,s.Z)((0,s.Z)({},i.Z.options.computed.classes.call(this)),{},{"v-alert--border":Boolean(this.border),"v-alert--dense":this.dense,"v-alert--outlined":this.outlined,"v-alert--prominent":this.prominent,"v-alert--text":this.text});return this.border&&(t["v-alert--border-".concat(this.border)]=!0),t},computedColor:function(){return this.color||this.type},computedIcon:function(){return!1!==this.icon&&("string"===typeof this.icon&&this.icon?this.icon:!!["error","info","success","warning"].includes(this.type)&&"$".concat(this.type))},hasColoredIcon:function(){return this.hasText||Boolean(this.border)&&this.coloredBorder},hasText:function(){return this.text||this.outlined},iconColor:function(){return this.hasColoredIcon?this.computedColor:void 0},isDark:function(){return!(!this.type||this.coloredBorder||this.outlined)||c.Z.options.computed.isDark.call(this)}},created:function(){this.$attrs.hasOwnProperty("outline")&&(0,h.fK)("outline","outlined",this)},methods:{genWrapper:function(){var t=[this.$slots.prepend||this.__cachedIcon,this.genContent(),this.__cachedBorder,this.$slots.append,this.$scopedSlots.close?this.$scopedSlots.close({toggle:this.toggle}):this.__cachedDismissible],e={staticClass:"v-alert__wrapper"};return this.$createElement("div",e,t)},genContent:function(){return this.$createElement("div",{staticClass:"v-alert__content"},this.$slots["default"])},genAlert:function(){var t={staticClass:"v-alert",attrs:{role:"alert"},on:this.listeners$,class:this.classes,style:this.styles,directives:[{name:"show",value:this.isActive}]};if(!this.coloredBorder){var e=this.hasText?this.setTextColor:this.setBackgroundColor;t=e(this.computedColor,t)}return this.$createElement("div",t,[this.genWrapper()])},toggle:function(){this.isActive=!this.isActive}},render:function(t){var e=this.genAlert();return this.transition?t("transition",{props:{name:this.transition,origin:this.origin,mode:this.mode}},[e]):e}})},1903:(t,e,r)=>{r.d(e,{Z:()=>n});var s=r(5129);const n=s.Z},1300:(t,e,r)=>{r.d(e,{Z:()=>g});var s=r(905),n=r(6080),i=(r(8309),r(3078)),a=r(1012),o=r(1804),l=r(4609),c=r(8914),u=r(4791),d=r(1734),p=r(3276),h=r(911),m=r(1050),f=r(4987),v=r(2653),k=["title"],Z=(0,f.Z)(l.Z,c.Z,d.Z,(0,u.d)("radioGroup"),p.Z);const g=Z.extend().extend({name:"v-radio",inheritAttrs:!1,props:{disabled:Boolean,id:String,label:String,name:String,offIcon:{type:String,default:"$radioOff"},onIcon:{type:String,default:"$radioOn"},readonly:Boolean,value:{default:null}},data:function(){return{isFocused:!1}},computed:{classes:function(){return(0,n.Z)((0,n.Z)({"v-radio--is-disabled":this.isDisabled,"v-radio--is-focused":this.isFocused},this.themeClasses),this.groupClasses)},computedColor:function(){if(!this.isDisabled)return h.Z.options.computed.computedColor.call(this)},computedIcon:function(){return this.isActive?this.onIcon:this.offIcon},computedId:function(){return o.Z.options.computed.computedId.call(this)},hasLabel:o.Z.options.computed.hasLabel,hasState:function(){return(this.radioGroup||{}).hasState},isDisabled:function(){return this.disabled||!!this.radioGroup&&this.radioGroup.isDisabled},isReadonly:function(){return this.readonly||!!this.radioGroup&&this.radioGroup.isReadonly},computedName:function(){return this.name||!this.radioGroup?this.name:this.radioGroup.name||"radio-".concat(this.radioGroup._uid)},rippleState:function(){return h.Z.options.computed.rippleState.call(this)},validationState:function(){return(this.radioGroup||{}).validationState||this.computedColor}},methods:{genInput:function(t){return h.Z.options.methods.genInput.call(this,"radio",t)},genLabel:function(){return this.hasLabel?this.$createElement(i.Z,{on:{click:h.X},attrs:{for:this.computedId},props:{color:this.validationState,focused:this.hasState}},(0,m.z9)(this,"label")||this.label):null},genRadio:function(){var t=this.attrs$,e=(t.title,(0,s.Z)(t,k));return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.$createElement(a.Z,this.setTextColor(this.validationState,{props:{dense:this.radioGroup&&this.radioGroup.dense}}),this.computedIcon),this.genInput((0,n.Z)({name:this.computedName,value:this.value},e)),this.genRipple(this.setTextColor(this.rippleState))])},onFocus:function(t){this.isFocused=!0,this.$emit("focus",t)},onBlur:function(t){this.isFocused=!1,this.$emit("blur",t)},onChange:function(){this.isDisabled||this.isReadonly||this.isActive||this.toggle()},onKeydown:function(){}},render:function(t){var e={staticClass:"v-radio",class:this.classes,on:(0,v.bp)({click:this.onChange},this.listeners$),attrs:{title:this.attrs$.title}};return t("div",e,[this.genRadio(),this.genLabel()])}})},8651:(t,e,r)=>{r.d(e,{Z:()=>l});var s=r(6080),n=(r(9653),r(1629),r(1804)),i=r(5064),a=r(4987),o=(0,a.Z)(i.y,n.Z);const l=o.extend({name:"v-radio-group",provide:function(){return{radioGroup:this}},props:{column:{type:Boolean,default:!0},height:{type:[Number,String],default:"auto"},name:String,row:Boolean,value:null},computed:{classes:function(){return(0,s.Z)((0,s.Z)({},n.Z.options.computed.classes.call(this)),{},{"v-input--selection-controls v-input--radio-group":!0,"v-input--radio-group--column":this.column&&!this.row,"v-input--radio-group--row":this.row})}},methods:{genDefaultSlot:function(){return this.$createElement("div",{staticClass:"v-input--radio-group__input",attrs:{id:this.id,role:"radiogroup","aria-labelledby":this.computedId}},n.Z.options.methods.genDefaultSlot.call(this))},genInputSlot:function(){var t=n.Z.options.methods.genInputSlot.call(this);return delete t.data.on.click,t},genLabel:function(){var t=n.Z.options.methods.genLabel.call(this);return t?(t.data.attrs.id=this.computedId,delete t.data.attrs["for"],t.tag="legend",t):null},onClick:i.y.options.methods.onClick},render:function(t){var e=n.Z.options.render.call(this,t);return this._b(e.data,"div",this.attrs$),e}})}}]);