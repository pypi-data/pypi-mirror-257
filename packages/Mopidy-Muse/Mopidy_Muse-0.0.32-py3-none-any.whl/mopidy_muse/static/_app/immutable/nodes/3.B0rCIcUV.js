import{f as Fe,c as je,a as Je}from"../chunks/index.Bunrjxgc.js";import{h as Ee,u as Ke}from"../chunks/await_block.B2YmWegA.js";import{S as Oe,i as Qe,m as R,e as v,t as G,o as We,d as f,p as q,c as k,q as Z,a as E,b as H,r as u,f as D,g as h,u as B,k as me,l as j,j as J,s as Y,G as Ie,n as ce,w as x,x as ee,y as ie,z as te,J as Xe,h as _e,A as le,K as Ye,B as Ze}from"../chunks/index.CHJ8_cIq.js";import{s as $e,h as xe,r as pe,c as X,o as et,m as De,j as W,n as $,p as Ce}from"../chunks/scheduler.DI5uFTER.js";import{e as Ve,w as tt,x as de,y as lt,z as Pe,A as st,B as oe,C as Te,F as se,f as rt,D as at,E as nt,G as it,H as ot,I as ct,m as ut,J as ft,K as dt,L as mt,g as _t,h as ht}from"../chunks/mopidyTools.DZb--U8M.js";import{c as pt}from"../chunks/clickOutside.BxFJ2b6i.js";import{b as he}from"../chunks/paths.A4KapFm1.js";const Ae="0.0.32";function Se(a,e,t){const l=a.slice();return l[21]=e[t],l[23]=t,l}function Ne(a){let e,t;function l(c,y){return c[9]?kt:vt}let s=l(a),r=s(a),n=a[7].track&&ze(a);return{c(){e=v("div"),r.c(),t=R(),n&&n.c(),this.h()},l(c){e=k(c,"DIV",{class:!0});var y=E(e);r.l(y),t=q(y),n&&n.l(y),y.forEach(f),this.h()},h(){u(e,"class","card")},m(c,y){D(c,e,y),r.m(e,null),h(e,t),n&&n.m(e,null)},p(c,y){s===(s=l(c))&&r?r.p(c,y):(r.d(1),r=s(c),r&&(r.c(),r.m(e,t))),c[7].track?n?n.p(c,y):(n=ze(c),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},d(c){c&&f(e),r.d(),n&&n.d()}}}function vt(a){let e,t=`<figure class="image is-1by1"><img src="${he}/icon.svg" alt="Placeholder" width="240" height="240"/></figure>`;return{c(){e=v("div"),e.innerHTML=t,this.h()},l(l){e=k(l,"DIV",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-1lb8zzs"&&(e.innerHTML=t),this.h()},h(){u(e,"class","card-image has-text-centered")},m(l,s){D(l,e,s)},p:$,d(l){l&&f(e)}}}function kt(a){let e,t,l,s;return{c(){e=v("div"),t=v("figure"),l=v("img"),this.h()},l(r){e=k(r,"DIV",{class:!0});var n=E(e);t=k(n,"FIGURE",{class:!0});var c=E(t);l=k(c,"IMG",{src:!0,width:!0,height:!0,alt:!0}),c.forEach(f),n.forEach(f),this.h()},h(){Ce(l.src,s=he+"/"+a[9])||u(l,"src",s),u(l,"width","240"),u(l,"height","240"),u(l,"alt","Album"),u(t,"class","image"),u(e,"class","card-image has-text-centered")},m(r,n){D(r,e,n),h(e,t),h(t,l)},p(r,n){n&512&&!Ce(l.src,s=he+"/"+r[9])&&u(l,"src",s)},d(r){r&&f(e)}}}function ze(a){let e,t,l,s,r=a[7].track.name+"",n,c,y,_=a[7].track.artists&&Me(a),d=a[1]&&a[0]&&Le(a);return{c(){e=v("div"),t=v("div"),l=v("div"),s=v("p"),n=G(r),c=R(),_&&_.c(),y=R(),d&&d.c(),this.h()},l(m){e=k(m,"DIV",{class:!0});var p=E(e);t=k(p,"DIV",{class:!0});var I=E(t);l=k(I,"DIV",{class:!0});var N=E(l);s=k(N,"P",{class:!0});var V=E(s);n=H(V,r),V.forEach(f),c=q(N),_&&_.l(N),N.forEach(f),I.forEach(f),y=q(p),d&&d.l(p),p.forEach(f),this.h()},h(){u(s,"class","title is-4"),u(l,"class","media-content"),u(t,"class","media"),u(e,"class","card-content")},m(m,p){D(m,e,p),h(e,t),h(t,l),h(l,s),h(s,n),h(l,c),_&&_.m(l,null),h(e,y),d&&d.m(e,null)},p(m,p){p&128&&r!==(r=m[7].track.name+"")&&Y(n,r),m[7].track.artists?_?_.p(m,p):(_=Me(m),_.c(),_.m(l,null)):_&&(_.d(1),_=null),m[1]&&m[0]?d?d.p(m,p):(d=Le(m),d.c(),d.m(e,null)):d&&(d.d(1),d=null)},d(m){m&&f(e),_&&_.d(),d&&d.d()}}}function Me(a){let e,t=a[7].track.artists[0].name+"",l;return{c(){e=v("p"),l=G(t),this.h()},l(s){e=k(s,"P",{class:!0});var r=E(e);l=H(r,t),r.forEach(f),this.h()},h(){u(e,"class","subtitle is-6")},m(s,r){D(s,e,r),h(e,l)},p(s,r){r&128&&t!==(t=s[7].track.artists[0].name+"")&&Y(l,t)},d(s){s&&f(e)}}}function Le(a){let e,t,l,s=oe(a[1])+"",r,n,c,y,_,d,m,p,I=oe(a[0])+"",N,V,L;return{c(){e=v("div"),t=v("div"),l=v("div"),r=G(s),n=G(" "),c=R(),y=v("div"),_=v("input"),d=R(),m=v("div"),p=G(" "),N=G(I),this.h()},l(C){e=k(C,"DIV",{class:!0});var g=E(e);t=k(g,"DIV",{class:!0});var P=E(t);l=k(P,"DIV",{class:!0});var U=E(l);r=H(U,s),n=H(U," "),U.forEach(f),c=q(P),y=k(P,"DIV",{class:!0});var w=E(y);_=k(w,"INPUT",{type:!0,min:!0,max:!0,class:!0}),w.forEach(f),d=q(P),m=k(P,"DIV",{class:!0});var i=E(m);p=H(i," "),N=H(i,I),i.forEach(f),P.forEach(f),g.forEach(f),this.h()},h(){u(l,"class","column is-narrow"),u(_,"type","range"),u(_,"min","0"),u(_,"max","100"),u(_,"class","slider svelte-1iz48mk"),u(y,"class","column"),u(m,"class","column is-narrow"),u(t,"class","columns is-mobile is-gapless"),u(e,"class","content")},m(C,g){D(C,e,g),h(e,t),h(t,l),h(l,r),h(l,n),h(t,c),h(t,y),h(y,_),Ie(_,a[6]),h(t,d),h(t,m),h(m,p),h(m,N),V||(L=[B(_,"change",a[15]),B(_,"input",a[15]),B(_,"change",function(){W(Te(a[6]))&&Te(a[6]).apply(this,arguments)})],V=!0)},p(C,g){a=C,g&2&&s!==(s=oe(a[1])+"")&&Y(r,s),g&64&&Ie(_,a[6]),g&1&&I!==(I=oe(a[0])+"")&&Y(N,I)},d(C){C&&f(e),V=!1,pe(L)}}}function Re(a){let e;function t(r,n){return r[5]?yt:r[8]&&r[8]._webSocket.readyState==1?bt:gt}let l=t(a),s=l(a);return{c(){s.c(),e=ce()},l(r){s.l(r),e=ce()},m(r,n){s.m(r,n),D(r,e,n)},p(r,n){l===(l=t(r))&&s?s.p(r,n):(s.d(1),s=l(r),s&&(s.c(),s.m(e.parentNode,e)))},d(r){r&&f(e),s.d(r)}}}function gt(a){let e,t="not connected to mopidy";return{c(){e=v("p"),e.textContent=t,this.h()},l(l){e=k(l,"P",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-dd5m6w"&&(e.textContent=t),this.h()},h(){u(e,"class","list-item")},m(l,s){D(l,e,s)},p:$,d(l){l&&f(e)}}}function bt(a){let e,t="loading songs...";return{c(){e=v("p"),e.textContent=t,this.h()},l(l){e=k(l,"P",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-rsxaxd"&&(e.textContent=t),this.h()},h(){u(e,"class","list-item")},m(l,s){D(l,e,s)},p:$,d(l){l&&f(e)}}}function yt(a){let e,t,l={ctx:a,current:null,token:null,hasCatch:!0,pending:It,then:Et,catch:wt,error:24};return Ee(t=a[5],l),{c(){e=ce(),l.block.c()},l(s){e=ce(),l.block.l(s)},m(s,r){D(s,e,r),l.block.m(s,l.anchor=r),l.mount=()=>e.parentNode,l.anchor=e},p(s,r){a=s,l.ctx=a,r&32&&t!==(t=a[5])&&Ee(t,l)||Ke(l,a,r)},d(s){s&&f(e),l.block.d(s),l.token=null,l=null}}}function wt(a){let e,t=a[24].message+"",l,s;return{c(){e=v("p"),l=G(t),s=R(),this.h()},l(r){e=k(r,"P",{class:!0,style:!0});var n=E(e);l=H(n,t),n.forEach(f),s=q(r),this.h()},h(){u(e,"class","list-item"),Ze(e,"color","red")},m(r,n){D(r,e,n),h(e,l),D(r,s,n)},p(r,n){n&32&&t!==(t=r[24].message+"")&&Y(l,t)},d(r){r&&(f(e),f(s))}}}function Et(a){let e,t="no tracks playing",l;return{c(){e=v("p"),e.textContent=t,l=R(),this.h()},l(s){e=k(s,"P",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-1lhd5re"&&(e.textContent=t),l=q(s),this.h()},h(){u(e,"class","list-item")},m(s,r){D(s,e,r),D(s,l,r)},p:$,d(s){s&&(f(e),f(l))}}}function It(a){let e,t="loading songs...",l;return{c(){e=v("p"),e.textContent=t,l=R(),this.h()},l(s){e=k(s,"P",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-rsxaxd"&&(e.textContent=t),l=q(s),this.h()},h(){u(e,"class","list-item")},m(s,r){D(s,e,r),D(s,l,r)},p:$,d(s){s&&(f(e),f(l))}}}function qe(a){let e,t,l;return t=new se({props:{icon:ct,spin:a[10]=="playing",class:"icon is-small"}}),{c(){e=G(" "),x(t.$$.fragment)},l(s){e=H(s," "),ee(t.$$.fragment,s)},m(s,r){D(s,e,r),te(t,s,r),l=!0},p(s,r){const n={};r&1024&&(n.spin=s[10]=="playing"),t.$set(n)},i(s){l||(j(t.$$.fragment,s),l=!0)},o(s){J(t.$$.fragment,s),l=!1},d(s){s&&f(e),le(t,s)}}}function Dt(a){let e,t;return e=new se({props:{icon:_t,class:"icon","aria-haspopup":"true","aria-controls":"dropdown-menu"}}),{c(){x(e.$$.fragment)},l(l){ee(e.$$.fragment,l)},m(l,s){te(e,l,s),t=!0},i(l){t||(j(e.$$.fragment,l),t=!0)},o(l){J(e.$$.fragment,l),t=!1},d(l){le(e,l)}}}function Ct(a){let e,t;return e=new se({props:{icon:ht,class:"icon","aria-haspopup":"true","aria-controls":"dropdown-menu"}}),{c(){x(e.$$.fragment)},l(l){ee(e.$$.fragment,l)},m(l,s){te(e,l,s),t=!0},i(l){t||(j(e.$$.fragment,l),t=!0)},o(l){J(e.$$.fragment,l),t=!1},d(l){le(e,l)}}}function Be(a,e){let t,l,s,r=e[21].track.name+"",n,c,y,_,d,m,p,I,N,V,L,C,g,P,U,w,i,b,o,T,M=$,z,O,ve,A=e[23]===e[7].index&&qe(e);const ke=[Ct,Dt],Q=[];function ge(S,F){return S[4]==S[21].tlid?0:1}p=ge(e),I=Q[p]=ke[p](e),g=new se({props:{icon:rt,class:"icon is-small"}}),i=new se({props:{icon:at,class:"icon is-small"}});function Ge(...S){return e[16](e[23],...S)}function He(...S){return e[17](e[23],...S)}function Ue(){return e[18](e[23])}return{key:a,first:null,c(){t=v("a"),l=v("div"),s=v("div"),n=G(r),c=R(),A&&A.c(),y=R(),_=v("div"),d=v("div"),m=v("div"),I.c(),N=R(),V=v("div"),L=v("div"),C=v("a"),x(g.$$.fragment),P=G(` 
                  Play`),U=R(),w=v("a"),x(i.$$.fragment),b=G(` 
                  Remove track`),o=R(),this.h()},l(S){t=k(S,"A",{class:!0,href:!0,draggable:!0,ondragover:!0});var F=E(t);l=k(F,"DIV",{class:!0});var K=E(l);s=k(K,"DIV",{class:!0,role:!0,tabindex:!0});var re=E(s);n=H(re,r),c=q(re),A&&A.l(re),re.forEach(f),y=q(K),_=k(K,"DIV",{class:!0});var be=E(_);d=k(be,"DIV",{class:!0});var ae=E(d);m=k(ae,"DIV",{class:!0,role:!0,tabindex:!0});var ye=E(m);I.l(ye),ye.forEach(f),N=q(ae),V=k(ae,"DIV",{class:!0,id:!0,role:!0});var we=E(V);L=k(we,"DIV",{class:!0});var ne=E(L);C=k(ne,"A",{href:!0,class:!0});var ue=E(C);ee(g.$$.fragment,ue),P=H(ue,` 
                  Play`),ue.forEach(f),U=q(ne),w=k(ne,"A",{href:!0,class:!0});var fe=E(w);ee(i.$$.fragment,fe),b=H(fe,` 
                  Remove track`),fe.forEach(f),ne.forEach(f),we.forEach(f),ae.forEach(f),be.forEach(f),K.forEach(f),o=q(F),F.forEach(f),this.h()},h(){u(s,"class","column"),u(s,"role","button"),u(s,"tabindex","0"),u(m,"class","dropdown-trigger"),u(m,"role","button"),u(m,"tabindex","0"),u(C,"href",null),u(C,"class","dropdown-item"),u(w,"href",null),u(w,"class","dropdown-item"),u(L,"class","dropdown-content"),u(V,"class","dropdown-menu"),u(V,"id","dropdown-menu"),u(V,"role","menu"),u(d,"class","dropdown is-right is-up"),ie(d,"is-active",e[4]==e[21].tlid),u(_,"class","column is-narrow"),u(l,"class","columns is-mobile"),u(t,"class","list-item"),u(t,"href",null),u(t,"draggable",!0),u(t,"ondragover","return false"),ie(t,"is-active",e[3]===e[23]),this.first=t},m(S,F){D(S,t,F),h(t,l),h(l,s),h(s,n),h(s,c),A&&A.m(s,null),h(l,y),h(l,_),h(_,d),h(d,m),Q[p].m(m,null),h(d,N),h(d,V),h(V,L),h(L,C),te(g,C,null),h(C,P),h(L,U),h(L,w),te(i,w,null),h(w,b),h(t,o),z=!0,O||(ve=[B(s,"click",function(){W(e[14](e[21].tlid))&&e[14](e[21].tlid).apply(this,arguments)}),B(s,"keypress",function(){W(e[14](e[21].tlid))&&e[14](e[21].tlid).apply(this,arguments)}),B(m,"click",function(){W(e[14](e[21].tlid))&&e[14](e[21].tlid).apply(this,arguments)}),B(m,"keypress",function(){W(e[14](e[21].tlid))&&e[14](e[21].tlid).apply(this,arguments)}),B(C,"click",function(){W(e[11](e[21]))&&e[11](e[21]).apply(this,arguments)}),B(w,"click",function(){W(e[12](e[21]))&&e[12](e[21]).apply(this,arguments)}),B(t,"dragstart",Ge),B(t,"drop",Xe(He)),B(t,"dragenter",Ue)],O=!0)},p(S,F){e=S,(!z||F&4)&&r!==(r=e[21].track.name+"")&&Y(n,r),e[23]===e[7].index?A?(A.p(e,F),F&132&&j(A,1)):(A=qe(e),A.c(),j(A,1),A.m(s,null)):A&&(_e(),J(A,1,1,()=>{A=null}),me());let K=p;p=ge(e),p!==K&&(_e(),J(Q[K],1,1,()=>{Q[K]=null}),me(),I=Q[p],I||(I=Q[p]=ke[p](e),I.c()),j(I,1),I.m(m,null)),(!z||F&20)&&ie(d,"is-active",e[4]==e[21].tlid),(!z||F&12)&&ie(t,"is-active",e[3]===e[23])},r(){T=t.getBoundingClientRect()},f(){Fe(t),M()},a(){M(),M=je(t,T,Je,{duration:300})},i(S){z||(j(A),j(I),j(g.$$.fragment,S),j(i.$$.fragment,S),z=!0)},o(S){J(A),J(I),J(g.$$.fragment,S),J(i.$$.fragment,S),z=!1},d(S){S&&f(t),A&&A.d(),Q[p].d(),le(g),le(i),O=!1,pe(ve)}}}function Vt(a){let e,t,l="Now playing",s,r,n,c=[],y=new Map,_,d,m,p,I,N,V,L,C,g=a[7]&&Ne(a),P=Ve(a[2]);const U=i=>i[21].tlid;for(let i=0;i<P.length;i+=1){let b=Se(a,P,i),o=U(b);y.set(o,c[i]=Be(o,b))}let w=null;return P.length||(w=Re(a)),{c(){e=R(),t=v("h1"),t.textContent=l,s=R(),g&&g.c(),r=R(),n=v("div");for(let i=0;i<c.length;i+=1)c[i].c();w&&w.c(),_=R(),d=v("div"),m=v("div"),p=v("a"),I=G("Version - "),N=G(Ae),this.h()},l(i){We("svelte-1546q17",document.head).forEach(f),e=q(i),t=k(i,"H1",{class:!0,"data-svelte-h":!0}),Z(t)!=="svelte-5oxt49"&&(t.textContent=l),s=q(i),g&&g.l(i),r=q(i),n=k(i,"DIV",{class:!0});var o=E(n);for(let O=0;O<c.length;O+=1)c[O].l(o);w&&w.l(o),o.forEach(f),_=q(i),d=k(i,"DIV",{class:!0});var T=E(d);m=k(T,"DIV",{class:!0});var M=E(m);p=k(M,"A",{href:!0});var z=E(p);I=H(z,"Version - "),N=H(z,Ae),z.forEach(f),M.forEach(f),T.forEach(f),this.h()},h(){document.title="Now Playing",u(t,"class","title"),u(n,"class","list is-hoverable"),u(p,"href","https://github.com/cristianpb/muse"),u(m,"class","column has-text-centered"),u(d,"class","columns")},m(i,b){D(i,e,b),D(i,t,b),D(i,s,b),g&&g.m(i,b),D(i,r,b),D(i,n,b);for(let o=0;o<c.length;o+=1)c[o]&&c[o].m(n,null);w&&w.m(n,null),D(i,_,b),D(i,d,b),h(d,m),h(m,p),h(p,I),h(p,N),V=!0,L||(C=[xe(pt.call(null,n)),B(n,"click_outside",a[19])],L=!0)},p(i,[b]){if(i[7]?g?g.p(i,b):(g=Ne(i),g.c(),g.m(r.parentNode,r)):g&&(g.d(1),g=null),b&32188){P=Ve(i[2]),_e();for(let o=0;o<c.length;o+=1)c[o].r();c=tt(c,b,U,1,i,P,y,n,nt,Be,null,Se);for(let o=0;o<c.length;o+=1)c[o].a();me(),!P.length&&w?w.p(i,b):P.length?w&&(w.d(1),w=null):(w=Re(i),w.c(),w.m(n,null))}},i(i){if(!V){for(let b=0;b<P.length;b+=1)j(c[b]);V=!0}},o(i){for(let b=0;b<c.length;b+=1)J(c[b]);V=!1},d(i){i&&(f(e),f(t),f(s),f(r),f(n),f(_),f(d)),g&&g.d(i);for(let b=0;b<c.length;b+=1)c[b].d();w&&w.d(),L=!1,pe(C)}}}function Pt(a,e){a.dataTransfer.effectAllowed="move",a.dataTransfer.dropEffect="move";const t=e;a.dataTransfer.setData("text/plain",t)}function Tt(a,e,t){let l,s,r,n,c,y,_;X(a,de,o=>t(7,s=o)),X(a,ut,o=>t(8,r=o)),X(a,Pe,o=>t(9,n=o)),X(a,ft,o=>t(0,c=o)),X(a,dt,o=>t(1,y=o)),X(a,mt,o=>t(10,_=o));let d=[],m=!1,p,I;et(async()=>{t(5,I=N())}),de.subscribe(async o=>{o&&o.track&&De(Pe,n=await lt(o.track),n)});const N=async()=>{t(2,d=await it())},V=o=>{ot(o),t(4,p=null)},L=async o=>{const T=await r.tracklist.remove({criteria:{uri:[o.track.uri]}});t(4,p=null),T.length>0&&t(2,d=d.filter(M=>M.track.uri!=T[0].track.uri))};function C(o,T){o.dataTransfer.dropEffect="move";const M=parseInt(o.dataTransfer.getData("text/plain")),z=d;M<T?(z.splice(T+1,0,z[M]),z.splice(M,1),r.tracklist.move({start:M,end:M+1,to_position:T})):(z.splice(T,0,z[M]),z.splice(M+1,1),r.tracklist.move({start:T,end:M,to_position:T+1})),t(2,d=z),M===s.index&&De(de,s.index=T,s),t(3,m=null)}const g=o=>{p===o?t(4,p=null):t(4,p=o)};function P(){l=Ye(this.value),t(6,l),t(1,y),t(0,c)}const U=(o,T)=>Pt(T,o),w=(o,T)=>C(T,o),i=o=>t(3,m=o),b=()=>t(4,p=null);return a.$$.update=()=>{a.$$.dirty&3&&t(6,l=st(y,c))},[c,y,d,m,p,I,l,s,r,n,_,V,L,C,g,P,U,w,i,b]}class qt extends Oe{constructor(e){super(),Qe(this,e,Tt,Vt,$e,{})}}export{qt as component};
