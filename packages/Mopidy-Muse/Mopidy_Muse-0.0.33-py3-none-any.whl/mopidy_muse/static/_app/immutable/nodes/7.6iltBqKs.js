import{f as ct,c as ut,a as ft}from"../chunks/index.Bunrjxgc.js";import{h as ke,u as we}from"../chunks/await_block.B2YmWegA.js";import{S as Ke,i as Xe,e as b,m as G,w as Z,t as R,c as v,a as $,d as f,p as H,q as ge,x,b as j,r as d,y as de,f as T,g as m,z as ee,u as J,l as y,h as ce,k as ue,j as A,A as te,v as Ye,s as _e,n as he,o as dt,G as Oe,J as ht,B as _t}from"../chunks/index.CHJ8_cIq.js";import{s as Ze,r as ve,c as Pe,o as xe,m as Me,n as L,j as fe,h as mt}from"../chunks/scheduler.DI5uFTER.js";import{F as ne,M as pt,e as be,O as De,m as et,c as tt,N as Ue,R as Be,n as Ie,Q as lt,P as kt,a1 as bt,f as nt,a as vt,b as rt,a2 as gt,a3 as $t,a4 as wt,a5 as yt,j as Et,k as At,d as qe,s as Tt,g as st,h as at,w as Dt,E as Pt,i as It,a6 as Ct}from"../chunks/mopidyTools.DZb--U8M.js";import{c as Vt}from"../chunks/clickOutside.BxFJ2b6i.js";function Re(r,e,t){const l=r.slice();return l[12]=e[t],l}function je(r){let e,t,l=r[1].name+"",n,a;return{c(){e=b("p"),t=R("Add "),n=R(l),a=R(" to a playlist"),this.h()},l(s){e=v(s,"P",{class:!0});var o=$(e);t=j(o,"Add "),n=j(o,l),a=j(o," to a playlist"),o.forEach(f),this.h()},h(){d(e,"class","label")},m(s,o){T(s,e,o),m(e,t),m(e,n),m(e,a)},p(s,o){o&2&&l!==(l=s[1].name+"")&&_e(n,l)},d(s){s&&f(e)}}}function St(r){let e=r[16].message+"",t;return{c(){t=R(e)},l(l){t=j(l,e)},m(l,n){T(l,t,n)},p(l,n){n&8&&e!==(e=l[16].message+"")&&_e(t,e)},i:L,o:L,d(l){l&&f(t)}}}function Nt(r){let e,t,l=(r[15].tracks?r[15].tracks.length:"0")+"",n,a,s,o,i,u,c,k,w;return u=new ne({props:{icon:lt,class:"icon"}}),{c(){e=b("div"),t=R("("),n=R(l),a=R(")"),s=G(),o=b("div"),i=b("a"),Z(u.$$.fragment),this.h()},l(_){e=v(_,"DIV",{class:!0});var h=$(e);t=j(h,"("),n=j(h,l),a=j(h,")"),h.forEach(f),s=H(_),o=v(_,"DIV",{class:!0});var S=$(o);i=v(S,"A",{href:!0});var Q=$(i);x(u.$$.fragment,Q),Q.forEach(f),S.forEach(f),this.h()},h(){d(e,"class","column is-narrow"),d(i,"href",null),d(o,"class","column is-narrow")},m(_,h){T(_,e,h),m(e,t),m(e,n),m(e,a),T(_,s,h),T(_,o,h),m(o,i),ee(u,i,null),c=!0,k||(w=J(i,"click",function(){fe(r[4](r[15]))&&r[4](r[15]).apply(this,arguments)}),k=!0)},p(_,h){r=_,(!c||h&8)&&l!==(l=(r[15].tracks?r[15].tracks.length:"0")+"")&&_e(n,l)},i(_){c||(y(u.$$.fragment,_),c=!0)},o(_){A(u.$$.fragment,_),c=!1},d(_){_&&(f(e),f(s),f(o)),te(u),k=!1,w()}}}function Ot(r){let e;return{c(){e=R("loading..")},l(t){e=j(t,"loading..")},m(t,l){T(t,e,l)},p:L,i:L,o:L,d(t){t&&f(e)}}}function Fe(r){let e,t,l,n=r[12].name+"",a,s,o,i,u,c={ctx:r,current:null,token:null,hasCatch:!0,pending:Ot,then:Nt,catch:St,value:15,error:16,blocks:[,,,]};return ke(o=Be(r[12].uri),c),{c(){e=b("div"),t=b("div"),l=b("div"),a=R(n),s=G(),c.block.c(),i=G(),this.h()},l(k){e=v(k,"DIV",{class:!0});var w=$(e);t=v(w,"DIV",{class:!0});var _=$(t);l=v(_,"DIV",{class:!0});var h=$(l);a=j(h,n),h.forEach(f),s=H(_),c.block.l(_),_.forEach(f),i=H(w),w.forEach(f),this.h()},h(){d(l,"class","column"),d(t,"class","columns is-mobile"),d(e,"class","list-item")},m(k,w){T(k,e,w),m(e,t),m(t,l),m(l,a),m(t,s),c.block.m(t,c.anchor=null),c.mount=()=>t,c.anchor=null,m(e,i),u=!0},p(k,w){r=k,(!u||w&8)&&n!==(n=r[12].name+"")&&_e(a,n),c.ctx=r,w&8&&o!==(o=Be(r[12].uri))&&ke(o,c)||we(c,r,w)},i(k){u||(y(c.block),u=!0)},o(k){for(let w=0;w<3;w+=1){const _=c.blocks[w];A(_)}u=!1},d(k){k&&f(e),c.block.d(),c.token=null,c=null}}}function Le(r){let e,t,l,n={ctx:r,current:null,token:null,hasCatch:!1,pending:Rt,then:Ut,catch:Mt,value:11,blocks:[,,,]};return ke(t=r[2],n),{c(){e=he(),n.block.c()},l(a){e=he(),n.block.l(a)},m(a,s){T(a,e,s),n.block.m(a,n.anchor=s),n.mount=()=>e.parentNode,n.anchor=e,l=!0},p(a,s){r=a,n.ctx=r,s&4&&t!==(t=r[2])&&ke(t,n)||we(n,r,s)},i(a){l||(y(n.block),l=!0)},o(a){for(let s=0;s<3;s+=1){const o=n.blocks[s];A(o)}l=!1},d(a){a&&f(e),n.block.d(a),n.token=null,n=null}}}function Mt(r){return{c:L,l:L,m:L,p:L,i:L,o:L,d:L}}function Ut(r){let e,t,l,n;const a=[qt,Bt],s=[];function o(i,u){return i[11]?0:1}return e=o(r),t=s[e]=a[e](r),{c(){t.c(),l=he()},l(i){t.l(i),l=he()},m(i,u){s[e].m(i,u),T(i,l,u),n=!0},p(i,u){let c=e;e=o(i),e!==c&&(ce(),A(s[c],1,1,()=>{s[c]=null}),ue(),t=s[e],t||(t=s[e]=a[e](i),t.c()),y(t,1),t.m(l.parentNode,l))},i(i){n||(y(t),n=!0)},o(i){A(t),n=!1},d(i){i&&f(l),s[e].d(i)}}}function Bt(r){let e;return{c(){e=R("Error")},l(t){e=j(t,"Error")},m(t,l){T(t,e,l)},i:L,o:L,d(t){t&&f(e)}}}function qt(r){let e,t,l;return t=new ne({props:{icon:kt,class:"icon"}}),{c(){e=b("a"),Z(t.$$.fragment),this.h()},l(n){e=v(n,"A",{class:!0,href:!0});var a=$(e);x(t.$$.fragment,a),a.forEach(f),this.h()},h(){d(e,"class","button svelte-xd5b65"),d(e,"href",null)},m(n,a){T(n,e,a),ee(t,e,null),l=!0},i(n){l||(y(t.$$.fragment,n),l=!0)},o(n){A(t.$$.fragment,n),l=!1},d(n){n&&f(e),te(t)}}}function Rt(r){let e,t,l,n,a="Save changes",s;return t=new ne({props:{icon:Ie,spin:!0,class:"icon"}}),{c(){e=b("a"),Z(t.$$.fragment),l=G(),n=b("button"),n.textContent=a,this.h()},l(o){e=v(o,"A",{class:!0,href:!0});var i=$(e);x(t.$$.fragment,i),i.forEach(f),l=H(o),n=v(o,"BUTTON",{class:!0,"data-svelte-h":!0}),ge(n)!=="svelte-1douuy3"&&(n.textContent=a),this.h()},h(){d(e,"class","button svelte-xd5b65"),d(e,"href",null),d(n,"class","button is-success svelte-xd5b65")},m(o,i){T(o,e,i),ee(t,e,null),T(o,l,i),T(o,n,i),s=!0},p:L,i(o){s||(y(t.$$.fragment,o),s=!0)},o(o){A(t.$$.fragment,o),s=!1},d(o){o&&(f(e),f(l),f(n)),te(t)}}}function jt(r){let e,t,l,n,a,s,o="Add to playlist",i,u,c,k,w,_,h,S,Q,q,F,U,K,B,O;c=new ne({props:{icon:pt,class:"icon"}});let C=r[1]&&je(r),z=be(r[3]),V=[];for(let p=0;p<z.length;p+=1)V[p]=Fe(Re(r,z,p));const M=p=>A(V[p],1,1,()=>{V[p]=null});let g=r[2]&&Le(r);return{c(){e=b("div"),t=b("div"),l=G(),n=b("div"),a=b("header"),s=b("p"),s.textContent=o,i=G(),u=b("a"),Z(c.$$.fragment),k=G(),w=b("section"),C&&C.c(),_=G(),h=b("div");for(let p=0;p<V.length;p+=1)V[p].c();S=R(`
       `),Q=G(),q=b("footer"),g&&g.c(),F=G(),U=b("button"),this.h()},l(p){e=v(p,"DIV",{class:!0});var N=$(e);t=v(N,"DIV",{class:!0,role:!0,tabindex:!0}),$(t).forEach(f),l=H(N),n=v(N,"DIV",{class:!0});var D=$(n);a=v(D,"HEADER",{class:!0});var X=$(a);s=v(X,"P",{class:!0,"data-svelte-h":!0}),ge(s)!=="svelte-10asrb2"&&(s.textContent=o),i=H(X),u=v(X,"A",{href:!0,"aria-label":!0});var E=$(u);x(c.$$.fragment,E),E.forEach(f),X.forEach(f),k=H(D),w=v(D,"SECTION",{class:!0});var I=$(w);C&&C.l(I),_=H(I),h=v(I,"DIV",{class:!0});var Y=$(h);for(let ae=0;ae<V.length;ae+=1)V[ae].l(Y);Y.forEach(f),S=j(I,`
       `),I.forEach(f),Q=H(D),q=v(D,"FOOTER",{class:!0});var se=$(q);g&&g.l(se),se.forEach(f),D.forEach(f),F=H(N),U=v(N,"BUTTON",{class:!0,"aria-label":!0}),$(U).forEach(f),N.forEach(f),this.h()},h(){d(t,"class","modal-background svelte-xd5b65"),d(t,"role","button"),d(t,"tabindex","0"),d(s,"class","modal-card-title svelte-xd5b65"),d(u,"href",null),d(u,"aria-label","close"),d(a,"class","modal-card-head svelte-xd5b65"),d(h,"class","list is-hoverable"),d(w,"class","modal-card-body svelte-xd5b65"),d(q,"class","modal-card-foot svelte-xd5b65"),d(n,"class","modal-card svelte-xd5b65"),d(U,"class","modal-close is-large svelte-xd5b65"),d(U,"aria-label","close"),d(e,"class","modal svelte-xd5b65"),de(e,"is-active",r[0])},m(p,N){T(p,e,N),m(e,t),m(e,l),m(e,n),m(n,a),m(a,s),m(a,i),m(a,u),ee(c,u,null),m(n,k),m(n,w),C&&C.m(w,null),m(w,_),m(w,h);for(let D=0;D<V.length;D+=1)V[D]&&V[D].m(h,null);m(w,S),m(n,Q),m(n,q),g&&g.m(q,null),m(e,F),m(e,U),K=!0,B||(O=[J(t,"click",r[5]),J(t,"keypress",r[6]),J(u,"click",r[7]),J(U,"click",r[8])],B=!0)},p(p,[N]){if(p[1]?C?C.p(p,N):(C=je(p),C.c(),C.m(w,_)):C&&(C.d(1),C=null),N&24){z=be(p[3]);let D;for(D=0;D<z.length;D+=1){const X=Re(p,z,D);V[D]?(V[D].p(X,N),y(V[D],1)):(V[D]=Fe(X),V[D].c(),y(V[D],1),V[D].m(h,null))}for(ce(),D=z.length;D<V.length;D+=1)M(D);ue()}p[2]?g?(g.p(p,N),N&4&&y(g,1)):(g=Le(p),g.c(),y(g,1),g.m(q,null)):g&&(ce(),A(g,1,1,()=>{g=null}),ue()),(!K||N&1)&&de(e,"is-active",p[0])},i(p){if(!K){y(c.$$.fragment,p);for(let N=0;N<z.length;N+=1)y(V[N]);y(g),K=!0}},o(p){A(c.$$.fragment,p),V=V.filter(Boolean);for(let N=0;N<V.length;N+=1)A(V[N]);A(g),K=!1},d(p){p&&f(e),te(c),C&&C.d(),Ye(V,p),g&&g.d(),B=!1,ve(O)}}}function Ft(r,e,t){let l,n;Pe(r,De,h=>t(3,l=h)),Pe(r,et,h=>t(9,n=h));let{showAddToPlaylistModal:a}=e,{track:s}=e,o;xe(async()=>{const h=await tt();console.log("in playlist",h),Me(De,l=await Ue(),l)});const i=h=>{t(2,o=u(h))},u=async h=>(h.tracks?h.tracks.push(s):h.tracks=[s],await n.playlists.save({playlist:h})?(Me(De,l=await Ue(),l),t(0,a=!a),!0):!1),c=()=>t(0,a=!a),k=()=>t(0,a=!a),w=()=>t(0,a=!a),_=()=>t(0,a=!a);return r.$$set=h=>{"showAddToPlaylistModal"in h&&t(0,a=h.showAddToPlaylistModal),"track"in h&&t(1,s=h.track)},[a,s,o,l,i,c,k,w,_]}class Lt extends Ke{constructor(e){super(),Xe(this,e,Ft,jt,Ze,{showAddToPlaylistModal:0,track:1})}}function Qe(r,e,t){const l=r.slice();return l[35]=e[t],l[37]=t,l}function Ge(r,e,t){const l=r.slice();return l[39]=e[t],l}function Qt(r){return{c:L,l:L,m:L,p:L,i:L,o:L,d:L}}function Gt(r){let e,t,l=be(r[1]),n=[];for(let s=0;s<l.length;s+=1)n[s]=He(Ge(r,l,s));const a=s=>A(n[s],1,1,()=>{n[s]=null});return{c(){e=b("div");for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){e=v(s,"DIV",{class:!0});var o=$(e);for(let i=0;i<n.length;i+=1)n[i].l(o);o.forEach(f),this.h()},h(){d(e,"class","tags svelte-1ixbxod")},m(s,o){T(s,e,o);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null);t=!0},p(s,o){if(o[0]&4099){l=be(s[1]);let i;for(i=0;i<l.length;i+=1){const u=Ge(s,l,i);n[i]?(n[i].p(u,o),y(n[i],1)):(n[i]=He(u),n[i].c(),y(n[i],1),n[i].m(e,null))}for(ce(),i=l.length;i<n.length;i+=1)a(i);ue()}},i(s){if(!t){for(let o=0;o<l.length;o+=1)y(n[o]);t=!0}},o(s){n=n.filter(Boolean);for(let o=0;o<n.length;o+=1)A(n[o]);t=!1},d(s){s&&f(e),Ye(n,s)}}}function Ht(r){let e,t,l=r[39]+"",n,a;return e=new ne({props:{icon:Ct,class:"icon is-small"}}),{c(){Z(e.$$.fragment),t=R("   "),n=R(l)},l(s){x(e.$$.fragment,s),t=j(s,"   "),n=j(s,l)},m(s,o){ee(e,s,o),T(s,t,o),T(s,n,o),a=!0},p(s,o){(!a||o[0]&2)&&l!==(l=s[39]+"")&&_e(n,l)},i(s){a||(y(e.$$.fragment,s),a=!0)},o(s){A(e.$$.fragment,s),a=!1},d(s){s&&(f(t),f(n)),te(e,s)}}}function zt(r){let e,t,l=r[39]+"",n,a;return e=new ne({props:{icon:r[12][r[39]],class:"icon is-small"}}),{c(){Z(e.$$.fragment),t=R("   "),n=R(l)},l(s){x(e.$$.fragment,s),t=j(s,"   "),n=j(s,l)},m(s,o){ee(e,s,o),T(s,t,o),T(s,n,o),a=!0},p(s,o){const i={};o[0]&2&&(i.icon=s[12][s[39]]),e.$set(i),(!a||o[0]&2)&&l!==(l=s[39]+"")&&_e(n,l)},i(s){a||(y(e.$$.fragment,s),a=!0)},o(s){A(e.$$.fragment,s),a=!1},d(s){s&&(f(t),f(n)),te(e,s)}}}function He(r){let e,t,l,n,a,s,o;const i=[zt,Ht],u=[];function c(_,h){return _[39]in _[12]?0:1}t=c(r),l=u[t]=i[t](r);function k(){return r[24](r[39])}function w(){return r[25](r[39])}return{c(){e=b("span"),l.c(),n=G(),this.h()},l(_){e=v(_,"SPAN",{class:!0,role:!0,tabindex:!0});var h=$(e);l.l(h),n=H(h),h.forEach(f),this.h()},h(){d(e,"class","tag svelte-1ixbxod"),d(e,"role","button"),d(e,"tabindex","0"),de(e,"is-primary",r[0][r[39]])},m(_,h){T(_,e,h),u[t].m(e,null),m(e,n),a=!0,s||(o=[J(e,"click",k),J(e,"keypress",w)],s=!0)},p(_,h){r=_;let S=t;t=c(r),t===S?u[t].p(r,h):(ce(),A(u[S],1,1,()=>{u[S]=null}),ue(),l=u[t],l?l.p(r,h):(l=u[t]=i[t](r),l.c()),y(l,1),l.m(e,n)),(!a||h[0]&3)&&de(e,"is-primary",r[0][r[39]])},i(_){a||(y(l),a=!0)},o(_){A(l),a=!1},d(_){_&&f(e),u[t].d(),s=!1,ve(o)}}}function Jt(r){let e,t,l,n;const a=[Kt,Wt],s=[];function o(i,u){return i[11]?0:1}return e=o(r),t=s[e]=a[e](r),{c(){t.c(),l=he()},l(i){t.l(i),l=he()},m(i,u){s[e].m(i,u),T(i,l,u),n=!0},p(i,u){let c=e;e=o(i),e!==c&&(ce(),A(s[c],1,1,()=>{s[c]=null}),ue(),t=s[e],t||(t=s[e]=a[e](i),t.c()),y(t,1),t.m(l.parentNode,l))},i(i){n||(y(t),n=!0)},o(i){A(t),n=!1},d(i){i&&f(l),s[e].d(i)}}}function Wt(r){let e,t,l,n;return l=new ne({props:{icon:Ie,spin:!0,class:"icon"}}),{c(){e=b("button"),t=R(`Connecting to mopidy     
              `),Z(l.$$.fragment),this.h()},l(a){e=v(a,"BUTTON",{class:!0});var s=$(e);t=j(s,`Connecting to mopidy     
              `),x(l.$$.fragment,s),s.forEach(f),this.h()},h(){d(e,"class","button"),e.disabled=!0},m(a,s){T(a,e,s),m(e,t),ee(l,e,null),n=!0},i(a){n||(y(l.$$.fragment,a),n=!0)},o(a){A(l.$$.fragment,a),n=!1},d(a){a&&f(e),te(l)}}}function Kt(r){let e,t,l,n;return l=new ne({props:{icon:Ie,spin:!0,class:"icon"}}),{c(){e=b("button"),t=R(`Loading sources    
              `),Z(l.$$.fragment),this.h()},l(a){e=v(a,"BUTTON",{class:!0});var s=$(e);t=j(s,`Loading sources    
              `),x(l.$$.fragment,s),s.forEach(f),this.h()},h(){d(e,"class","button"),e.disabled=!0},m(a,s){T(a,e,s),m(e,t),ee(l,e,null),n=!0},i(a){n||(y(l.$$.fragment,a),n=!0)},o(a){A(l.$$.fragment,a),n=!1},d(a){a&&f(e),te(l)}}}function ze(r){let e,t,l,n,a,s,o,i,u,c,k,w,_,h,S,Q,q,F,U,K,B,O;const C=[Yt,Xt],z=[];function V(M,g){return M[5]?0:1}return n=V(r),a=z[n]=C[n](r),c=new ne({props:{icon:nt,class:"icon is-small"}}),h=new ne({props:{icon:vt,class:"icon is-small"}}),F=new ne({props:{icon:rt,class:"icon is-small"}}),{c(){e=b("div"),t=b("div"),l=b("div"),a.c(),s=G(),o=b("div"),i=b("div"),u=b("a"),Z(c.$$.fragment),k=R(` 
                  Play All`),w=G(),_=b("a"),Z(h.$$.fragment),S=R(` 
                  Shuffle & Play All`),Q=G(),q=b("a"),Z(F.$$.fragment),U=R(` 
                  Add to queue`),this.h()},l(M){e=v(M,"DIV",{class:!0});var g=$(e);t=v(g,"DIV",{class:!0});var p=$(t);l=v(p,"DIV",{class:!0,role:!0,tabindex:!0});var N=$(l);a.l(N),N.forEach(f),s=H(p),o=v(p,"DIV",{class:!0,id:!0,role:!0});var D=$(o);i=v(D,"DIV",{class:!0});var X=$(i);u=v(X,"A",{href:!0,class:!0});var E=$(u);x(c.$$.fragment,E),k=j(E,` 
                  Play All`),E.forEach(f),w=H(X),_=v(X,"A",{href:!0,class:!0});var I=$(_);x(h.$$.fragment,I),S=j(I,` 
                  Shuffle & Play All`),I.forEach(f),Q=H(X),q=v(X,"A",{href:!0,class:!0});var Y=$(q);x(F.$$.fragment,Y),U=j(Y,` 
                  Add to queue`),Y.forEach(f),X.forEach(f),D.forEach(f),p.forEach(f),g.forEach(f),this.h()},h(){d(l,"class","dropdown-trigger"),d(l,"role","button"),d(l,"tabindex","0"),d(u,"href",null),d(u,"class","dropdown-item"),d(_,"href",null),d(_,"class","dropdown-item"),d(q,"href",null),d(q,"class","dropdown-item"),d(i,"class","dropdown-content"),d(o,"class","dropdown-menu"),d(o,"id","dropdown-menu"),d(o,"role","menu"),d(t,"class","dropdown is-right"),de(t,"is-active",r[5]),d(e,"class","column is-narrow")},m(M,g){T(M,e,g),m(e,t),m(t,l),z[n].m(l,null),m(t,s),m(t,o),m(o,i),m(i,u),ee(c,u,null),m(u,k),m(i,w),m(i,_),ee(h,_,null),m(_,S),m(i,Q),m(i,q),ee(F,q,null),m(q,U),K=!0,B||(O=[J(l,"click",r[26]),J(l,"keypress",r[27]),J(u,"click",function(){fe(r[18](r[8]))&&r[18](r[8]).apply(this,arguments)}),J(_,"click",function(){fe(r[21](r[8]))&&r[21](r[8]).apply(this,arguments)}),J(q,"click",function(){fe(r[22](r[8]))&&r[22](r[8]).apply(this,arguments)})],B=!0)},p(M,g){r=M;let p=n;n=V(r),n!==p&&(ce(),A(z[p],1,1,()=>{z[p]=null}),ue(),a=z[n],a||(a=z[n]=C[n](r),a.c()),y(a,1),a.m(l,null)),(!K||g[0]&32)&&de(t,"is-active",r[5])},i(M){K||(y(a),y(c.$$.fragment,M),y(h.$$.fragment,M),y(F.$$.fragment,M),K=!0)},o(M){A(a),A(c.$$.fragment,M),A(h.$$.fragment,M),A(F.$$.fragment,M),K=!1},d(M){M&&f(e),z[n].d(),te(c),te(h),te(F),B=!1,ve(O)}}}function Xt(r){let e,t,l;return t=new ne({props:{icon:st,class:"icon","aria-haspopup":"true","aria-controls":"dropdown-menu"}}),{c(){e=b("a"),Z(t.$$.fragment),this.h()},l(n){e=v(n,"A",{href:!0,class:!0});var a=$(e);x(t.$$.fragment,a),a.forEach(f),this.h()},h(){d(e,"href",null),d(e,"class","button")},m(n,a){T(n,e,a),ee(t,e,null),l=!0},i(n){l||(y(t.$$.fragment,n),l=!0)},o(n){A(t.$$.fragment,n),l=!1},d(n){n&&f(e),te(t)}}}function Yt(r){let e,t,l;return t=new ne({props:{icon:at,class:"icon","aria-haspopup":"true","aria-controls":"dropdown-menu"}}),{c(){e=b("a"),Z(t.$$.fragment),this.h()},l(n){e=v(n,"A",{href:!0,class:!0});var a=$(e);x(t.$$.fragment,a),a.forEach(f),this.h()},h(){d(e,"href",null),d(e,"class","button")},m(n,a){T(n,e,a),ee(t,e,null),l=!0},i(n){l||(y(t.$$.fragment,n),l=!0)},o(n){A(t.$$.fragment,n),l=!1},d(n){n&&f(e),te(t)}}}function Zt(r){let e,t,l={ctx:r,current:null,token:null,hasCatch:!0,pending:ll,then:tl,catch:el,error:38};return ke(t=r[2],l),{c(){e=he(),l.block.c()},l(n){e=he(),l.block.l(n)},m(n,a){T(n,e,a),l.block.m(n,l.anchor=a),l.mount=()=>e.parentNode,l.anchor=e},p(n,a){r=n,l.ctx=r,a[0]&4&&t!==(t=r[2])&&ke(t,l)||we(l,r,a)},i:L,o:L,d(n){n&&f(e),l.block.d(n),l.token=null,l=null}}}function xt(r){let e,t=[],l=new Map,n,a,s,o=be(r[8]);const i=u=>u[37]+1;for(let u=0;u<o.length;u+=1){let c=Qe(r,o,u),k=i(c);l.set(k,t[u]=Je(k,c))}return{c(){e=b("div");for(let u=0;u<t.length;u+=1)t[u].c();this.h()},l(u){e=v(u,"DIV",{class:!0});var c=$(e);for(let k=0;k<t.length;k+=1)t[k].l(c);c.forEach(f),this.h()},h(){d(e,"class","list is-hoverable")},m(u,c){T(u,e,c);for(let k=0;k<t.length;k+=1)t[k]&&t[k].m(e,null);n=!0,a||(s=[mt(Vt.call(null,e)),J(e,"click_outside",r[31])],a=!0)},p(u,c){if(c[0]&2065280){o=be(u[8]),ce();for(let k=0;k<t.length;k+=1)t[k].r();t=Dt(t,c,i,1,u,o,l,e,Pt,Je,null,Qe);for(let k=0;k<t.length;k+=1)t[k].a();ue()}},i(u){if(!n){for(let c=0;c<o.length;c+=1)y(t[c]);n=!0}},o(u){for(let c=0;c<t.length;c+=1)A(t[c]);n=!1},d(u){u&&f(e);for(let c=0;c<t.length;c+=1)t[c].d();a=!1,ve(s)}}}function el(r){let e,t=r[38].message+"",l;return{c(){e=b("p"),l=R(t),this.h()},l(n){e=v(n,"P",{class:!0,style:!0});var a=$(e);l=j(a,t),a.forEach(f),this.h()},h(){d(e,"class","list-item"),_t(e,"color","red")},m(n,a){T(n,e,a),m(e,l)},p(n,a){a[0]&4&&t!==(t=n[38].message+"")&&_e(l,t)},d(n){n&&f(e)}}}function tl(r){let e,t="no tracks found";return{c(){e=b("a"),e.textContent=t,this.h()},l(l){e=v(l,"A",{class:!0,href:!0,"data-svelte-h":!0}),ge(e)!=="svelte-1mx3vgn"&&(e.textContent=t),this.h()},h(){d(e,"class","list-item"),d(e,"href",null)},m(l,n){T(l,e,n)},p:L,d(l){l&&f(e)}}}function ll(r){let e,t="loading ...";return{c(){e=b("p"),e.textContent=t,this.h()},l(l){e=v(l,"P",{class:!0,"data-svelte-h":!0}),ge(e)!=="svelte-1tdkvab"&&(e.textContent=t),this.h()},h(){d(e,"class","list-item")},m(l,n){T(l,e,n)},p:L,d(l){l&&f(e)}}}function nl(r){let e;return{c(){e=R("unknown artist")},l(t){e=j(t,"unknown artist")},m(t,l){T(t,e,l)},p:L,d(t){t&&f(e)}}}function rl(r){let e=r[35].artists.map(We).join(", ")+"",t,l,n=r[35].name+"",a;return{c(){t=R(e),l=R(" - "),a=R(n)},l(s){t=j(s,e),l=j(s," - "),a=j(s,n)},m(s,o){T(s,t,o),T(s,l,o),T(s,a,o)},p(s,o){o[0]&256&&e!==(e=s[35].artists.map(We).join(", ")+"")&&_e(t,e),o[0]&256&&n!==(n=s[35].name+"")&&_e(a,n)},d(s){s&&(f(t),f(l),f(a))}}}function sl(r){let e,t;return e=new ne({props:{icon:st,class:"icon","aria-haspopup":"true","aria-controls":"dropdown-menu"}}),{c(){Z(e.$$.fragment)},l(l){x(e.$$.fragment,l)},m(l,n){ee(e,l,n),t=!0},i(l){t||(y(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){te(e,l)}}}function al(r){let e,t;return e=new ne({props:{icon:at,class:"icon","aria-haspopup":"true","aria-controls":"dropdown-menu"}}),{c(){Z(e.$$.fragment)},l(l){x(e.$$.fragment,l)},m(l,n){ee(e,l,n),t=!0},i(l){t||(y(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){te(e,l)}}}function Je(r,e){let t,l,n,a,s,o,i,u,c,k,w,_,h,S,Q,q,F,U,K,B,O,C,z,V,M,g,p,N,D,X=L,E,I,Y;function se(W,ie){return W[35].artists?rl:nl}let ae=se(e),re=ae(e);const P=[al,sl],le=[];function oe(W,ie){return W[7]==W[37]?0:1}u=oe(e),c=le[u]=P[u](e),S=new ne({props:{icon:nt,class:"icon is-small"}}),U=new ne({props:{icon:It,class:"icon is-small"}}),C=new ne({props:{icon:rt,class:"icon is-small"}}),g=new ne({props:{icon:lt,class:"icon is-small"}});function ot(...W){return e[28](e[37],...W)}function it(){return e[30](e[37])}return{key:r,first:null,c(){t=b("a"),l=b("div"),n=b("div"),re.c(),a=G(),s=b("div"),o=b("div"),i=b("div"),c.c(),k=G(),w=b("div"),_=b("div"),h=b("a"),Z(S.$$.fragment),Q=R(` 
                      Play now`),q=G(),F=b("a"),Z(U.$$.fragment),K=R(` 
                      Play next`),B=G(),O=b("a"),Z(C.$$.fragment),z=R(` 
                      Add to queue`),V=G(),M=b("a"),Z(g.$$.fragment),p=R(` 
                      Add to a playlist`),N=G(),this.h()},l(W){t=v(W,"A",{class:!0,href:!0,draggable:!0,ondragover:!0});var ie=$(t);l=v(ie,"DIV",{class:!0,role:!0,tabindex:!0});var me=$(l);n=v(me,"DIV",{class:!0});var Ce=$(n);re.l(Ce),Ce.forEach(f),a=H(me),s=v(me,"DIV",{class:!0});var Ve=$(s);o=v(Ve,"DIV",{class:!0});var $e=$(o);i=v($e,"DIV",{class:!0});var Se=$(i);c.l(Se),Se.forEach(f),k=H($e),w=v($e,"DIV",{class:!0,id:!0,role:!0});var Ne=$(w);_=v(Ne,"DIV",{class:!0});var pe=$(_);h=v(pe,"A",{href:!0,class:!0});var ye=$(h);x(S.$$.fragment,ye),Q=j(ye,` 
                      Play now`),ye.forEach(f),q=H(pe),F=v(pe,"A",{href:!0,class:!0});var Ee=$(F);x(U.$$.fragment,Ee),K=j(Ee,` 
                      Play next`),Ee.forEach(f),B=H(pe),O=v(pe,"A",{href:!0,class:!0});var Ae=$(O);x(C.$$.fragment,Ae),z=j(Ae,` 
                      Add to queue`),Ae.forEach(f),V=H(pe),M=v(pe,"A",{href:!0,class:!0});var Te=$(M);x(g.$$.fragment,Te),p=j(Te,` 
                      Add to a playlist`),Te.forEach(f),pe.forEach(f),Ne.forEach(f),$e.forEach(f),Ve.forEach(f),me.forEach(f),N=H(ie),ie.forEach(f),this.h()},h(){d(n,"class","column"),d(i,"class","dropdown-trigger"),d(h,"href",null),d(h,"class","dropdown-item"),d(F,"href",null),d(F,"class","dropdown-item"),d(O,"href",null),d(O,"class","dropdown-item"),d(M,"href",null),d(M,"class","dropdown-item"),d(_,"class","dropdown-content"),d(w,"class","dropdown-menu"),d(w,"id","dropdown-menu"),d(w,"role","menu"),d(o,"class","dropdown is-right is-up"),de(o,"is-active",e[7]==e[37]),d(s,"class","column is-narrow"),d(l,"class","columns is-mobile"),d(l,"role","button"),d(l,"tabindex","0"),d(t,"class","list-item"),d(t,"href",null),d(t,"draggable",!0),d(t,"ondragover","return false"),de(t,"is-active",e[9]===e[37]),this.first=t},m(W,ie){T(W,t,ie),m(t,l),m(l,n),re.m(n,null),m(l,a),m(l,s),m(s,o),m(o,i),le[u].m(i,null),m(o,k),m(o,w),m(w,_),m(_,h),ee(S,h,null),m(h,Q),m(_,q),m(_,F),ee(U,F,null),m(F,K),m(_,B),m(_,O),ee(C,O,null),m(O,z),m(_,V),m(_,M),ee(g,M,null),m(M,p),m(t,N),E=!0,I||(Y=[J(h,"click",function(){fe(e[18](e[35].uri))&&e[18](e[35].uri).apply(this,arguments)}),J(F,"click",function(){fe(e[19](e[35].uri))&&e[19](e[35].uri).apply(this,arguments)}),J(O,"click",function(){fe(e[20](e[35].uri))&&e[20](e[35].uri).apply(this,arguments)}),J(M,"click",function(){fe(e[15](e[35]))&&e[15](e[35]).apply(this,arguments)}),J(l,"click",function(){fe(e[16](e[37]))&&e[16](e[37]).apply(this,arguments)}),J(l,"keypress",function(){fe(e[16](e[37]))&&e[16](e[37]).apply(this,arguments)}),J(t,"dragstart",ot),J(t,"drop",ht(e[29])),J(t,"dragenter",it)],I=!0)},p(W,ie){e=W,ae===(ae=se(e))&&re?re.p(e,ie):(re.d(1),re=ae(e),re&&(re.c(),re.m(n,null)));let me=u;u=oe(e),u!==me&&(ce(),A(le[me],1,1,()=>{le[me]=null}),ue(),c=le[u],c||(c=le[u]=P[u](e),c.c()),y(c,1),c.m(i,null)),(!E||ie[0]&384)&&de(o,"is-active",e[7]==e[37]),(!E||ie[0]&768)&&de(t,"is-active",e[9]===e[37])},r(){D=t.getBoundingClientRect()},f(){ct(t),X()},a(){X(),X=ut(t,D,ft,{duration:300})},i(W){E||(y(c),y(S.$$.fragment,W),y(U.$$.fragment,W),y(C.$$.fragment,W),y(g.$$.fragment,W),E=!0)},o(W){A(c),A(S.$$.fragment,W),A(U.$$.fragment,W),A(C.$$.fragment,W),A(g.$$.fragment,W),E=!1},d(W){W&&f(t),re.d(),le[u].d(),te(S),te(U),te(C),te(g),I=!1,ve(Y)}}}function ol(r){let e,t,l="Search",n,a,s,o,i,u,c,k,w,_,h,S,Q,q,F,U,K,B,O,C,z,V,M,g={ctx:r,current:null,token:null,hasCatch:!1,pending:Jt,then:Gt,catch:Qt,blocks:[,,,]};ke(w=r[3],g),Q=new ne({props:{icon:bt,class:"icon"}});let p=r[8].length>0&&ze(r);U=new Lt({props:{showAddToPlaylistModal:r[4],track:r[6]}});const N=[xt,Zt],D=[];function X(E,I){return E[8].length>0?0:E[2]?1:-1}return~(B=X(r))&&(O=D[B]=N[B](r)),{c(){e=G(),t=b("h1"),t.textContent=l,n=G(),a=b("div"),s=b("div"),o=b("input"),i=G(),u=b("div"),c=b("div"),k=b("div"),g.block.c(),_=G(),h=b("div"),S=b("button"),Z(Q.$$.fragment),q=G(),p&&p.c(),F=G(),Z(U.$$.fragment),K=G(),O&&O.c(),C=he(),this.h()},l(E){dt("svelte-3s7lyl",document.head).forEach(f),e=H(E),t=v(E,"H1",{class:!0,"data-svelte-h":!0}),ge(t)!=="svelte-ik0iip"&&(t.textContent=l),n=H(E),a=v(E,"DIV",{class:!0});var Y=$(a);s=v(Y,"DIV",{class:!0});var se=$(s);o=v(se,"INPUT",{class:!0,type:!0,placeholder:!0}),se.forEach(f),i=H(Y),u=v(Y,"DIV",{class:!0});var ae=$(u);c=v(ae,"DIV",{class:!0});var re=$(c);k=v(re,"DIV",{class:!0});var P=$(k);g.block.l(P),P.forEach(f),_=H(re),h=v(re,"DIV",{class:!0});var le=$(h);S=v(le,"BUTTON",{class:!0});var oe=$(S);x(Q.$$.fragment,oe),oe.forEach(f),le.forEach(f),q=H(re),p&&p.l(re),re.forEach(f),ae.forEach(f),Y.forEach(f),F=H(E),x(U.$$.fragment,E),K=H(E),O&&O.l(E),C=he(),this.h()},h(){document.title="Search",d(t,"class","title"),d(o,"class","input is-rounded svelte-1ixbxod"),d(o,"type","text"),d(o,"placeholder","Search for music"),d(s,"class","column"),d(k,"class","column"),d(S,"class","button"),d(h,"class","column is-narrow"),d(c,"class","columns is-mobile"),d(u,"class","column is-narrow"),d(a,"class","columns")},m(E,I){T(E,e,I),T(E,t,I),T(E,n,I),T(E,a,I),m(a,s),m(s,o),Oe(o,r[10]),m(a,i),m(a,u),m(u,c),m(c,k),g.block.m(k,g.anchor=null),g.mount=()=>k,g.anchor=null,m(c,_),m(c,h),m(h,S),ee(Q,S,null),m(c,q),p&&p.m(c,null),T(E,F,I),ee(U,E,I),T(E,K,I),~B&&D[B].m(E,I),T(E,C,I),z=!0,V||(M=[J(o,"keydown",r[14]),J(o,"input",r[23]),J(S,"click",r[13])],V=!0)},p(E,I){r=E,I[0]&1024&&o.value!==r[10]&&Oe(o,r[10]),g.ctx=r,I[0]&8&&w!==(w=r[3])&&ke(w,g)||we(g,r,I),r[8].length>0?p?(p.p(r,I),I[0]&256&&y(p,1)):(p=ze(r),p.c(),y(p,1),p.m(c,null)):p&&(ce(),A(p,1,1,()=>{p=null}),ue());const Y={};I[0]&16&&(Y.showAddToPlaylistModal=r[4]),I[0]&64&&(Y.track=r[6]),U.$set(Y);let se=B;B=X(r),B===se?~B&&D[B].p(r,I):(O&&(ce(),A(D[se],1,1,()=>{D[se]=null}),ue()),~B?(O=D[B],O?O.p(r,I):(O=D[B]=N[B](r),O.c()),y(O,1),O.m(C.parentNode,C)):O=null)},i(E){z||(y(g.block),y(Q.$$.fragment,E),y(p),y(U.$$.fragment,E),y(O),z=!0)},o(E){for(let I=0;I<3;I+=1){const Y=g.blocks[I];A(Y)}A(Q.$$.fragment,E),A(p),A(U.$$.fragment,E),A(O),z=!1},d(E){E&&(f(e),f(t),f(n),f(a),f(F),f(K),f(C)),g.block.d(),g.token=null,g=null,te(Q),p&&p.d(),te(U,E),~B&&D[B].d(E),V=!1,ve(M)}}}function il(r,e){r.dataTransfer.effectAllowed="move",r.dataTransfer.dropEffect="move";const t=e;r.dataTransfer.setData("text/plain",t)}const We=r=>r.name;function cl(r,e,t){let l;Pe(r,et,P=>t(32,l=P));let n={},a=["http","https","file","mms","rtmp","rtmps","rtsp","podcast+file","podcast+http","podcast+https"],s={local:gt,podcast:$t,subidy:wt,tunein:yt},o=[],i,u,c=!1,k=!1,w,_,h=[],S=!1,Q="",q;xe(async()=>{t(3,u=F())});const F=async()=>{t(11,q=await tt()),console.log("in search",q);const P=await l.getUriSchemes();P&&(t(1,o=P.filter(le=>a.indexOf(le)===-1)),o.forEach(le=>t(0,n[le]=!0,n)))},U=async()=>{t(8,h=[]);const P=Object.entries(n).filter(oe=>oe[1]).map(oe=>`${oe[0]}:`),le=await l.library.search({query:{any:[Q]},uris:[`${P}`]});if(le&&le.length>0){let{tracks:oe}=le.pop();return oe&&t(8,h=oe),!0}};function K(P){P.which===13&&t(2,i=U())}const B=P=>{t(6,w=P),t(4,c=!c)},O=P=>{_===P?t(7,_=null):t(7,_=P)};function C(P){P.dataTransfer.dropEffect="move",t(9,S=null)}const z=P=>{t(7,_=null),t(5,k=!1),Et(P)},V=P=>{t(7,_=null),At(P)},M=P=>{t(7,_=null),qe(null,[P])},g=P=>{t(5,k=!1),Tt(P)},p=P=>{t(5,k=!1),qe(P)};function N(){Q=this.value,t(10,Q)}return[n,o,i,u,c,k,w,_,h,S,Q,q,s,U,K,B,O,C,z,V,M,g,p,N,P=>t(0,n[P]=!n[P],n),P=>t(0,n[P]=!n[P],n),()=>t(5,k=!k),()=>t(5,k=!k),(P,le)=>il(le,P),P=>C(P),P=>t(9,S=P),()=>t(7,_=null)]}class pl extends Ke{constructor(e){super(),Xe(this,e,cl,ol,Ze,{},null,[-1,-1])}}export{pl as component};
