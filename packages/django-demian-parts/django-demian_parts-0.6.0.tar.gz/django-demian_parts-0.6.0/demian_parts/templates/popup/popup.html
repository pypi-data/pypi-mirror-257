{% load static %}

{% if obj %}
<style>
.modal-title {
  text-decoration: none;
  color: #777777;
  transition: 0.3s;
  line-height: 1;
}

.modal .modal-dialog .modal-footer .popup-check {
  text-decoration: none;
  color: #777777;
  transition: 0.3s;
  line-height: 1;
}

.modal-body {
  padding: 0;
}
</style>

<!-- 쿠키를 통해 다시 열기 방지 체크 및 창 오픈시 모달창 실행 스크립트 -->
<script src="{% static 'popup/js/jquery-3.6.0.min.js' %}"></script>
<script src="{% static 'popup/js/jquery.cookie.js' %}"></script>


<!-- Modal -->
<div class="modal fade" id="demianModal" tabindex="-1" aria-labelledby="demianModal" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="demianModalLabel">{{ obj.modal_title }}</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        {% if type == 'Type1' %}
          {% include 'popup/type1.html' %}
        {% elif type == 'Type2' %}
          {% include 'popup/type2.html' %}
        {% elif type == 'Type3' %}
          {% include 'popup/type3.html' %}
        {% elif type == 'Type4' %}
          {% include 'popup/type4.html' %}
        {% elif type == 'Type5' %}
          {% include 'popup/type5.html' %}
        {% elif type == 'Calendar' %}
          {% include 'popup/type-calendar.html' %}
        {% endif %}
      </div>
      <div class="modal-footer justify-content-start">
        <div class="popup-check">
          <input type="checkbox" id="epopup_suppress" />
          <label for="epopup_suppress" data-id="checkbox_text">
            {{ dont_show_again }}
          </label>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  jQuery(document).ready(function($) {
    if ($.cookie("ecacher-modal_demianModal")) {
      $("#demianModal").remove();
    } else {
      {% if type == 'Calendar' %}
        demian_modal = $("#demianModal").modal()
        demian_modal.on('shown.bs.modal', function () {
          calendar.render();
        })
      {% endif %}
      $("#demianModal").modal("show");
    }

    $("#epopup_suppress").click(function() {
      if ($(this).is(":checked")) {
          $("#demianModal").modal("hide");
          $.cookie("ecacher-modal_demianModal", true);
      } else {
        $.cookie("ecacher-modal_demianModal", false);
      }
    })
  });
</script>

{% endif %}

